(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),u=n(14),i=n(2),l=function(e){var t=e.searchTerm,n=e.database,a=e.handleChange;console.log(e);var o=n.filter((function(e){return e.name.toLowerCase()===t.toLowerCase()}));return r.a.createElement("div",null,"Filter shown with:",r.a.createElement("input",{type:"text",value:t,onChange:a}),r.a.createElement("div",null,"Result:",o.map((function(e){return r.a.createElement("p",null,e.name,"  ",e.number)}))))},s=function(e){var t=e.onFormSubmit,n=e.personName,a=e.personNameChange,o=e.personNumber,c=e.personNumberChange;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name:",r.a.createElement("input",{type:"text",value:n,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{type:"text",value:o,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var t,n=e.message;switch(n.type){case"success":t="success";break;case"fail":t="error";break;default:t="default"}return null===n?null:r.a.createElement("div",{className:t},n.message)},f=n(3),d=n.n(f),p="/api/persons",b=function(){return d.a.get(p).then((function(e){return e.data}))},h=function(e){return d.a.post(p,e).then((function(e){return e.data}))},v=function(e,t){return d.a.put("".concat(p,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){return d.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},g=function(e){var t=e.database,n=e.removePerson,a=e.showNotification;return r.a.createElement("div",null,r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id},e.name,"  ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e){window.confirm("Are you sure you want to delete ".concat(e.name))&&E(e.id).then((function(t){n(e.id)})).catch(a("Person ".concat(e.name," not found!"),"fail"))}(e)}},"delete"))}))))};n(37);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var y=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(n),f=Object(i.a)(c,2),d=f[0],p=f[1],E=Object(a.useState)({message:"",type:""}),y=Object(i.a)(E,2),O=y[0],j=y[1];Object(a.useEffect)((function(){b().then((function(e){o(e),p(e)}))}),[]);var P=function(e,t){j({message:e,type:t}),setTimeout((function(){j({message:"",type:""})}),3e3)},k=Object(a.useState)(""),C=Object(i.a)(k,2),N=C[0],S=C[1],D=Object(a.useState)(""),x=Object(i.a)(D,2),A=x[0],F=x[1],T=Object(a.useState)(""),B=Object(i.a)(T,2),J=B[0],L=B[1];return r.a.createElement("div",null,r.a.createElement("p",null,"notes : start your db server: npm run server (to run server on port 3001 and file is db.json)",r.a.createElement("br",null),"second start your app server : npm start (to run app on server 3000)",r.a.createElement("br",null)," see your data at http://localhost:3001/persons "),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(m,{message:O}),r.a.createElement(l,{searchTerm:J,database:n,handleChange:function(e){L(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(s,{onFormSubmit:function(e){e.preventDefault();var t={name:N,number:A},a=n.some((function(e){return e.name===N})),r=n.find((function(e){return e.name===N})),c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{name:N,number:A});a?window.confirm("".concat(t.name," is already added to phonebook. Do you want to replace the old number with ").concat(t.number,"?"))&&v(r.id,c).then((function(e){!function(e){o(n.map((function(t){return t.id!==e.id?t:e}))),p(n.map((function(t){return t.id!==e.id?t:e})))}(e),S(""),F("")})).catch(P("Person ".concat(t.name," not found!"),"fail")):h(t).then((function(e){!function(e){o(n.concat(e)),p(n.concat(e))}(t),P(t?"Added ".concat(N):"Updated ".concat(N),"success"),S(""),F("")})).catch(P("Person ".concat(t.name," can not added!"),"fail"))},personName:N,personNameChange:function(e){S(e.target.value)},personNumber:A,personNumberChange:function(e){F(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(g,{database:d,removePerson:function(e){o(n.filter((function(t){return t.id!==e}))),p(n.filter((function(t){return t.id!==e})))},showNotification:P}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[15,1,2]]]);
//# sourceMappingURL=main.cd0da323.chunk.js.map